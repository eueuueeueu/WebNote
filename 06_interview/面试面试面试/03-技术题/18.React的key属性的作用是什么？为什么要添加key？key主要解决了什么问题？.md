# 18.React的key属性的作用是什么？为什么要添加key？key主要解决了什么问题？

## 回答重点

在 React 中，key 属性用于帮助识别哪些元素发生了变化、添加或移除了。key 属性的存在使得 React 能更加高效地更新和重新渲染组件，尤其是在动态生成列表的情况下。每一个 key 都应该在其兄弟节点中是独一无二的，这是因为 React 使用 key 来追踪每一个元素，从而保证在进行 DOM 差异化更新时的操作最小化。

添加 key 的主要目的是为了提升渲染性能，避免不必要的 DOM 操作，从而提高应用的响应速度和用户体验。没有 key 或使用不唯一的 key，可能会导致组件重复渲染、状态异常等问题。

## 扩展知识

1）**为什么要使用唯一的 key**： 当你使用列表时，React 需要知道哪些项目发生了变化、添加或被移除了。唯一的 key 属性允许 React 更智能地做出这一点。通过比较前后的 key，React 能快速确定哪些元素需要更新，哪一些可以复用。这大大提升了渲染效率。

2）**key 的最佳实践**：

- **使用稳定且唯一的值**：如果列表项目有唯一的 id 那么用 id 作为 key 是最佳选择。
- **不要用数组索引作为 key**：虽然数组索引也能用于 key，但它可能导致性能问题和组件状态的混乱，特别是在对列表项进行操作（如排序、删除等）时。

3）**key 是如何工作的**：

- React 中的虚拟 DOM 利用 key 来确定元素与其对应的实际 DOM 节点。key 就像给每一个元素打上了一个独一无二的标签，这样当状态或属性变化时，React 能够更精确地知道哪些元素需要更新。
- 例如，有两个相同的组件根据不同的 key 分别渲染，这样 React 就能够区分开来，而不会出现混淆。

4）**key 带来的问题**： 如果使用不当，key 也可能带来一些问题：

- 使用不唯一的 key 会导致 React 无法正确识别列表项，从而导致渲染错误。
- 使用相同的 key 会覆盖元素，导致意料之外的行为。



